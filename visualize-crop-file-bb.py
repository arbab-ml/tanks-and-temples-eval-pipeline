import json

def polygon_to_ply(polygon, filename):
    with open(filename, 'w') as ply_file:
        ply_file.write("ply\n")
        ply_file.write("format ascii 1.0\n")
        ply_file.write("comment Generated by script\n")
        ply_file.write("element vertex " + str(len(polygon)) + "\n")
        ply_file.write("property float x\n")
        ply_file.write("property float y\n")
        ply_file.write("property float z\n")
        ply_file.write("element face 1\n")
        ply_file.write("property list uchar int vertex_indices\n")
        ply_file.write("end_header\n")

        for vertex in polygon:
            ply_file.write(" ".join(map(str, vertex)) + "\n")

        ply_file.write(str(len(polygon)) + " " + " ".join(map(str, range(len(polygon)))) + "\n")


with open('python_toolbox/evaluation/data/Ignatius/Ignatius.json', 'r') as json_file:
    data = json.load(json_file)
    polygon_to_ply(data["bounding_polygon"], "bounding_box.ply")
